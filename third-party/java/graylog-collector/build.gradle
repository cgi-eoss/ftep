buildscript {
    dependencies {
        classpath pl.osPackage
    }
}

group 'com.cgi.eoss.f-tep'
version '1.2.1'

apply plugin: 'base'
apply plugin: 'nebula.ospackage'

ospackage {
    packageName 'graylog-collector'
    version '0.5.0'
    release '1'
    arch X86_64
    os LINUX
    packageDescription 'Graylog Collector'
    url 'https://github.com/graylog-labs/collector/'
    license 'GNU General Public License v3.0'
    vendor 'F-TEP'

    requires('java-1.8.0-openjdk-headless')

    user 'root'

    into('/etc'){
        from 'etc'
        from('graylog-collector-0.5.0/config/collector.conf.example') {
            into 'graylog/collector'
            rename('collector.conf.example', 'collector.conf')
        }
    }

    into('/usr/share/graylog-collector') {
        from 'graylog-collector-0.5.0/graylog-collector.jar'
        from('graylog-collector-0.5.0/bin/graylog-collector-script-config.sh') {
            fileMode = 0755
        }
        from('graylog-collector-0.5.0/bin/graylog-collector') {
            into 'bin'
            fileMode = 0755
        }
        from('graylog-collector-0.5.0/lib/sigar') {
            into 'lib/sigar'
            include 'libsigar-amd64-linux.so'
            include 'libsigar-x86-linux.so'
            include 'sigar.jar'
        }
    }
}

sonarqube {
    skipProject = true
}
