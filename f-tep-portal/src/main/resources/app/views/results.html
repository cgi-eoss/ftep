<div id="results" ng-controller="ResultsCtrl">
    <div class="spinner" ng-show="spinner.loading"></div>
    <md-tabs md-selected="resultTabs.selected">
      <md-tab label="Results">
        <div ng-if="geoResults == undefined" class="result-info">No results to display</div>
        <div ng-if="geoResults != undefined">
	           <!-- GeoSearch results -->
	            <ul class="products-list product-list-in-box">
	               <div ng-repeat="result in geoResults">
		              <li class="geo-item" ng-repeat="item in result.results.entities" ng-click="toggleSelection(item)"
		                  ng-class="isSelected(item) ? 'resulthighlight' : 'resultnormal'" ng-mouseover="updateMetadata(item)" dnd-draggable="getSelectedItemsLinks(item)">
                               <div class="row">
                                    <div class="col-md-12">
                                        <span class="pull-right controls">
                                            <a uib-tooltip="Download" tooltip-trigger="mouseenter" tooltip-append-to-body="true" href="{{getLink(item)}}" target="_self">
                                                <span class="glyphicon glyphicon-download-alt"></span>
                                            </a>
                                            <a ng-click="showMetadata($event, item)">
                                                <span class="glyphicon glyphicon-info-sign metadata-info-button"></span>
                                            </a>
                                        </span>
                                        <div class="row">
	                                        <div class="col-md-8">
		                                        {{item.identifier}}
		                                    </div>
	                                    </div>
                                        <div class="row result-description">
		                                    <div class="col-md-4">
		                                        <div class="product-title">
		                                            Start: {{item.start}}
		                                       </div>
		                                    </div>
                                            <div class="col-md-4">
                                                End: {{item.stop}}
                                            </div>
                                            <div class="col-md-4">
                                                Size: {{item.size | bytesToGB}}
                                            </div>
	                                    </div>
                                    </div>
                               </div>
		               </li>
	               </div>
	             </ul>
	       </div>
        </md-tab>
      <md-tab label="Databasket">
        <div ng-if="selectedDatabasket == undefined" class="note" >Please select or create a databasket first</div>
        <div ng-if="selectedDatabasket != undefined" id="databasket-content">
	        <h4>{{selectedDatabasket.attributes.name}}</h4>
	        <h5>{{selectedDatabasket.attributes.description}}</h5>
	        <p>
	            <ul class="products-list">
	               <li ng-repeat="item in selectedDatabasket.items" dnd-draggable="getBasketItem(item)">{{item.identifier}}{{item.attributes.fname}}{{item.name}}
	                    <span class="glyphicon glyphicon-remove" ng-click="removeItemFromBasket(item)"></span>
	                </li>
	            </ul>
	        </p>
        </div>
      </md-tab>
      <md-tab label="Job" ng-if="selectedJob != undefined">
        <div id="job-content">
            <div class="row">
                <div class="col-md-6">
			        <h4>Job id: {{selectedJob.id}}</h4>
			    </div>
                <div class="col-md-6">
			        <div class="job-status" style="{{getColor(selectedJob.attributes.status)}}">{{selectedJob.attributes.status}}</div>
		        </div>
	        </div>
	        <ul class="nav nav-pills" ng-init="jobTab = 'outputs'">
			  <li role="presentation" ng-class="(jobTab == 'inputs') ? 'active' : ''" ng-click="jobTab = 'inputs'"><a>Inputs</a></li>
			  <li role="presentation" ng-class="(jobTab == 'outputs') ? 'active' : ''" ng-click="jobTab = 'outputs'"><a>Outputs</a></li>
			</ul>
			<div class="job-details" ng-if="jobTab == 'inputs'">
			     <ul class="job-files">
                 <li ng-repeat="(key, value) in getJobInputs(selectedJob)" class="resultnormal">
                    <div class="row">
                        <div class="col-md-2">{{key}}
                        </div>
                        <div class="col-md-10 wrap-text">{{value}}
                        </div>
                    </div>
                 </li>
                 </ul>
			</div>
			<div class="job-details" ng-if="jobTab == 'outputs'">
                 <ul class="job-files">
                 <li ng-repeat="outputFile in jobOutputs" ng-click="selectOutputFile(outputFile)" ng-class="isOutputSelected(outputFile) ? 'resulthighlight' : 'resultnormal'"
                     dnd-draggable="getSelectedOutputFiles(outputFile)">
                    <div class="row">
                        <div class="col-md-10">{{outputFile.attributes.fname}}
                        </div>
                        <div class="col-md-2">
                            <a href="{{getOutputLink(outputFile.attributes.link)}}" target="_self">
                                <span class="glyphicon glyphicon-download-alt" uib-tooltip="Download" tooltip-trigger="mouseenter" tooltip-append-to-body="true" ></span>
                            </a>
                        </div>
                    </div>
                 </li>
                 </ul>
			</div>
        </div>
      </md-tab>
    </md-tabs>
    <div id="results-header">
            <div ng-show="resultTabs.selected == 0">
               <div class="row">
	               <span class="col-md-8 button-section">
	                   <paging page="resultsCurrentPage" page-size="resultsPageSize" total="resultsTotal" show-first-last="true"
	                        paging-action="fetchResultsPage(page)"></paging>
	               </span>
	               <section class="col-md-4 button-section">
		               <md-button class="toolbar-button" ng-disabled="geoResults == undefined" ng-class="(geoResults == undefined) ? 'icon-disabled' : ''"
		                   uib-tooltip="Select all" tooltip-trigger="mouseenter" ng-click="selectAll()"><img src="images/select_all.png"/></md-button>
		               <md-button class="toolbar-button" ng-disabled="geoResults == undefined" ng-class="(geoResults == undefined) ? 'icon-disabled' : ''"
		                   uib-tooltip="Deselect all" tooltip-trigger="mouseenter" ng-click="clearSelection()"><img src="images/deselect_all.png"/></md-button>
		               <md-button class="toolbar-button" ng-disabled="geoResults == undefined" ng-class="(geoResults == undefined) ? 'icon-disabled' : ''"
		                   uib-tooltip="Invert selection" tooltip-trigger="mouseenter" ng-click="invertSelection()"><img src="images/invert_selection.png"/></md-button>
		               <md-button class="toolbar-button" ng-click="createNewBasket($event)"
		                   uib-tooltip="Create new databasket" tooltip-trigger="mouseenter" tooltip-append-to-body="true" ><img src="images/new-shopping-cart.png"/></md-button>
		               <md-button class="toolbar-button" ng-disabled="geoResults == undefined || selectedDatabasket == undefined"
		                      ng-class="(geoResults == undefined || selectedDatabasket == undefined) ? 'icon-disabled' : ''"
		                      ng-click="addToDatabasket()" uib-tooltip="Add to databasket" tooltip-trigger="mouseenter" tooltip-append-to-body="true">
		                      <img src="images/add-to-shopping-cart.png"/>
		               </md-button>
	               </section>
               </div>
            </div>
            <div ng-show="resultTabs.selected == 1">
                <section class="button-section">
                   <md-button class="toolbar-clear-button" ng-disabled="selectedDatabasket == undefined" ng-class="selectedDatabasket == undefined ? 'icon-disabled' : ''" ng-click="clearDatabasket()">
                        <img class="clear-button" src="images/clear.png"/></md-button>
                   <md-button class="toolbar-button" uib-tooltip="Create new databasket" tooltip-trigger="mouseenter" tooltip-append-to-body="true" ng-click="createNewBasket($event)">
                        <img src="images/new-shopping-cart.png"/>
                   </md-button>
                </section>
            </div>
            <div ng-show="resultTabs.selected == 2">
                <section class="button-section">
                   <md-button class="toolbar-button" uib-tooltip="Select all" tooltip-trigger="mouseenter" ng-click="selectAllOutputs()"><img src="images/select_all.png"/></md-button>
                   <md-button class="toolbar-button" uib-tooltip="Deselect all" tooltip-trigger="mouseenter" ng-click="clearOutputsSelection()"><img src="images/deselect_all.png"/></md-button>
                   <md-button class="toolbar-button" uib-tooltip="Invert selection" tooltip-trigger="mouseenter" ng-click="invertOutputsSelection()"><img src="images/invert_selection.png"/></md-button>
                   <md-button class="toolbar-button" uib-tooltip="Create new databasket" tooltip-trigger="mouseenter" tooltip-append-to-body="true" ng-click="createNewBasket($event)">
                        <img src="images/new-shopping-cart.png"/>
                   </md-button>
                   <md-button class="toolbar-button" uib-tooltip="Add to databasket" tooltip-trigger="mouseenter" tooltip-append-to-body="true" ng-disabled="selectedDatabasket == undefined"
                        ng-class="(selectedDatabasket == undefined) ? 'icon-disabled' : ''"
                        ng-click="addOutputsToDatabasket()"><img src="images/add-to-shopping-cart.png"/></md-button>
                </section>
            </div>
    </div>
</div>